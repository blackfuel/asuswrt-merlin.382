--- b/configure.ac
+++ a/configure.ac
@@ -1516,12 +1516,13 @@
 UL_REQUIRES_HAVE([lslogins], [gnu_utmpx], [GNU utmpx functions])
 AM_CONDITIONAL([BUILD_LSLOGINS], [test "x$build_lslogins" = xyes])
 
+AC_ARG_ENABLE([chcpu],
+  AS_HELP_STRING([--disable-chcpu], [do not build chcpu]),
+  [], [UL_DEFAULT_ENABLE([chcpu], [check])]
+)
+UL_BUILD_INIT([chcpu])
-
-UL_BUILD_INIT([chcpu], [check])
 UL_REQUIRES_LINUX([chcpu])
+AM_CONDITIONAL([BUILD_CHCPU], [test "x$chcpu" = xyes])
-UL_REQUIRES_HAVE([chcpu], [cpu_set_t], [cpu_set_t type])
-AM_CONDITIONAL([BUILD_CHCPU], [test "x$build_chcpu" = xyes])
-
 
 AC_ARG_ENABLE([wdctl],
   AS_HELP_STRING([--disable-wdctl], [do not build wdctl]),
